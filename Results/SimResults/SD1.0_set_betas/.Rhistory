source('~/RA Pooling/RA_Pooling_Source.5-5-2016.R')
library("ggplot2", lib.loc="~/R/win-library/3.1")
library("shiny", lib.loc="~/R/win-library/3.1")
linreg.data2 <- function(n, b0, b1, b2, b3, failprev, x2prob, cutoff,
x1shape=0, x1scale=0, x1mean=0, x1sd=0, x1df=0, x1expscale=0,
family="gamma", se){
x1 <- NULL
x2 <- NULL
fs <- NULL
vl <- NULL
pop <- NULL
for (i in 1:n){
if (family=="gamma"){
x1[i] <- rgamma(1, shape=x1shape, scale=x1scale)}
else if (family=="normal"){
x1[i] <- rnorm(1, mean=x1mean, sd=x1sd)}
else if (family=="chisq"){
x1[i] <- rchisq(1, df=x1df)}
else if (family=="exp"){
x1[i] <- rexp(1, scale=x1expscale)}
x2[i] <- rbinom(1, 1, x2prob)
fs[i] <- rbinom(1, 1, failprev)
pop[i] <- 10^(b0 + b1*x1[i] + b2*x1[i]*fs[i] + b3*x2[i]*fs[i] + rnorm(1, mean=0, sd=se))
}
data <- data.frame(cbind(pop, x1, x2, fs))
return(data)
}
data125.AGAIG <- read.table("3AGAIGb0.0.5b1.1b2.1.5b3.2prev.01x2prob.25cut1000sd.5se.12.R")
data125.2 <- read.table("3b0.0b1.3b2.2b3.0prev.01x2prob.25cut1000sd.5se.12.R")
data125.3 <- read.table("3b0.1b1.1b2.0b3.3prev.01x2prob.25cut1000sd.5se.12.R")
data125.4 <- read.table("3b0.2b1.-1b2.3b3.3prev.01x2prob.25cut1000sd.5se.12.R")
data125 <- data.frame(cbind(data125.AGAIG, data125.2, data125.3, data125.4))
data125 <- data.frame(data125[c(85,95,98,116,126,129,141,151,154,166,176,179,191,201,
204,222,232,235,247,257,260,272,282,285,303,313,316,334,
344,347,365,375,378), , FALSE])
data <- read.table("isolated.csv")
data <- read.csv("isolated.csv")
View(data)
data <- read.csv("test.csv")
View(data)
x <- matrix(nrow=3, ncol=2)
x[1,1] <- 9
x[1,2] <- 9
x[2,1] <- 5
x[2,2] <- 13
x[3,1] <- 4
x[3,2] <- 0
x
fisher.test(x)
library("foreign", lib.loc="~/R/win-library/3.1")
data <- read.dta("clean.data.comb.asian.dta")
data <- read.dta("clean.data.comb.asian2.dta")
View(data)
data.isol <- data[data$isol==1,]
data.sys <- data[data$isol==0,]
data.isol.immuno <- data.isol[data.isol$immuno==1,]
View(data)
summary(data.isol.immuno$event)
summary(factor(data.isol.immuno$event))
data.isol.not <- data.isol[data.isol$immuno==0,]
summary(factor(data.isol.not$event))
View(data.isol.not)
View(data.isol)
View(data.isol.not)
View(data.isol.immuno)
summary(factor(data.isol.immuno$event), na.rm=TRUE)
View(data.isol.not)
View(data.isol)
data.isol <- data[data$isol==1 & data$immuno!= NA,]
View(data.isol)
data.isol <- data[data$isol==1,]
View(data.isol)
data.isol <- data.isol[data.isol$immuno != NA,]
View(data.isol.immuno)
View(data.isol)
data.isol <- data[data$isol==1,]
data.isol <- data.isol[data.isol$immuno != "NA",]
View(data.isol)
data.isol <- data.isol[complete.cases(data.isol$immuno),]
View(data.isol)
View(data.sys)
data.sys <- data.sys[complete.cases(data.sys$immuno),]
data.isol.immuno <- data.isol[data.isol$immuno==1,]
summary(factor(data.isol.immuno$events)
)
View(data.isol.immuno)
summary(factor(data.isol.immuno$event)
)
summary(factor(data.isol.not$event))
data.sys.immuno <- data.sys[data.sys$immuno==1,]
data.sys.not <- data.sys[data.sys$immuno==0,]
data.isol <- data[data$isol==1,]
View(data.sys.immuno)
View(data.sys.not)
ummary(factor(data.sys.immuno$event))
summary(factor(data.sys.immuno$event))
summary(factor(data.sys.not$event))
View(data.isol)
summary(factor(data.isol.immuno$eventcat))
View(data.isol.immuno)
summary(factor(data.isol.not$eventcat))
summary(factor(data.sys.immuno$eventcat))
summary(factor(data.sys.not$eventcat))
getwd()
data <- read.table("pseudoA-wLag-data.txt")
View(data)
colnames(data) <- c("id", "age", "fev", "female", "pseudoa", "f508", "pancreat",
"age0", "agel", "agemax", "lagfev", "lagpseudoa", "lagage")
View(data)
write.csv(data, file="biost540finaldata.csv")
source('~/RA Pooling/RA_Pooling_Source.6-7-2016.R')
source('~/RA Pooling/RA_Pooling_Source.6-7-2016.R')
pop1 <- createpop(n=100000, .10, 1000, TRUE)
hist(pop1)
plot.pop1
?hist()
pop1 <- log(pop1, base=10)
hist(pop1)
hist(pop1, freq=TRUE)
hist(pop1, freq=FALSE)
vl <- pop1[pop1>1000]
lengthvl
length(vl)
summary(pop1)
pop2 <- 10^pop1
vl <- pop2[pop2>1000]
length(vl)
/100000
9964/100000
?pgamma()
prevover500 <- .10, 1000)
prevover500(.10, 1000)
hist(pop1, freq=FALSE)
hist(pop1, freq=FALSE, xlab = "Log Base 10 VL", ylab="Density", main= "May et al. VL Values")
curve(dgamma(x, shape=4, scale=0.3))
h <- hist(pop1, freq=FALSE, xlab = "Log Base 10 VL", ylab="Density", main= "May et al. VL Values")
pop <- createpop(10000, .2, 500)
x <- one.matrix(pop, 10, .12)
View(x)
t <- seq(1, 24)
t
t <- c(1,2,3,4,5,6,7,8,9,10,11,12,19)
prev <- c(.01, .03, .07,.12,.18,.24,.27,.30,.32,.35,.37,.38,.50)
prev.est <- dataframe(cbind(t, prev))
prev.est <- data.frame(cbind(t, prev))
View(prev.est)
plot(prev~t)
tlog <- log(t, base=2)
plot(prev~tlog)
tlog <- log(t, base=10)
plot(prev~tlog)
?rep()
data <- matrix(nrow=0, ncol=2)
for(i in 1:length(t)){
vl <- createpop(1000, prev[i], 1000, prevfail=TRUE)
time <- rep(t[i], times=1000)
data1 <- cbind(vl, time)
data <- rbind(data, data1)
}
View(data)
check <- data[1:1000,]
View(data)
data2 <- data.frame(data)
View(data2)
data <- data.frame(data)
View(data)
high <- check$vl
check <- data[1:1000,]
high <- check$vl
length(high[high>1000])
11/1000
t2 <- t^2
t3 <- t^3
data$logvl <- log(data$vl, base=10)
View(data)
plot(data$logvl~data$time)
glm(data$logvl~data$time)
fit <- glm(data$logvl~data$time)
summary(fit)
prev.est.naive <- c(.01,.03,.05,.07,,08,.11,.11,.14,.17,.19,.20, .22)
prev.est.naive <- c(.01,.03,.05,.07,08,.11,.11,.14,.17,.19,.20, .22)
data.naive <- matrix(nrow=0, ncol=2)
for(i in 1:length(prev.est.naive)){
vl <- createpop(1000, prev.est.naive[i], 1000, prevfail=TRUE)
time <- rep(t[i], times=1000)
data1 <- cbind(vl, time)
data.naive <- rbind(data.naive, data1)
}
prev.est.naive <- c(.01,.03,.05,.07,.08,.11,.11,.14,.17,.19,.20, .22)
data.naive <- matrix(nrow=0, ncol=2)
for(i in 1:length(prev.est.naive)){
vl <- createpop(1000, prev.est.naive[i], 1000, prevfail=TRUE)
time <- rep(t[i], times=1000)
data1 <- cbind(vl, time)
data.naive <- rbind(data.naive, data1)
}
View(data.naive)
check <- data.naive[1:1000,]
high <- check$vl
length(high[high>1000])
check <- data.naive[1:1000,]
high <- check
length(high[high>1000])
data.naive <- data.frame(data.naive)
View(data.naive)
data.naive$logvl <- log(data.naive$vl, base=10)
View(data.naive)
fit.naive <- glm(data.naive$logvl~data.naive$time)
summary(fit.naive)
prev.est.naive <- c(.01,.02,.05,.07,.08,.11,.11,.14,.17,.19,.20, .22)
data.naive <- matrix(nrow=0, ncol=2)
for(i in 1:length(prev.est.naive)){
vl <- createpop(1000, prev.est.naive[i], 1000, prevfail=TRUE)
time <- rep(t[i], times=1000)
data1 <- cbind(vl, time)
data.naive <- rbind(data.naive, data1)
}
data.naive <- data.frame(data.naive)
data.naive$logvl <- log(data.naive$vl, base=10)
check <- data.naive[1:1000,]
high <- check
length(high[high>1000])
fit.naive <- glm(data.naive$logvl~data.naive$time)
summary(fit.naive)
data$logtime <- log(time, base=2)
View(data)
log(1)
log(1, base=2)
data$logtime <- log(data$time, base=2)
View(data)
fit <- glm(data$logvl~data$logtime)
summary(fit)
plot(fit)
plot(predict(fit))
summary(fit)
logvl <- seq(1, 6, by=.01)
log(19, base=2)
logtime <- seq(0, 4.3, by=.1)
logtime <- seq(0, 4.3, by=.1)
logvl <- NULL
for(i in 1:length(logvl)){
logvl[i] <- 1.21 + .3344*logtime
}
logtime <- seq(0, 4.3, by=.1)
logvl <- NULL
for(i in 1:length(logvl)){
logvl[i] <- 1.21 + .3344*logtime[i]
}
plot(logvl~logtime)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.21 + .3344*logtime[i]
}
plot(logvl~logtime)
time <- 2^logtime
plot(logvl~time)
t <- c(1,2,3,4,5,6,7,8,9,10,11,12,19)
t2 <- t^2
t3 <- t^3
prev <- c(.01, .03, .07,.12,.18,.24,.27,.30,.32,.35,.37,.38,.50)
prev.est <- data.frame(cbind(t, prev))
data <- matrix(nrow=0, ncol=2)
for(i in 1:length(t)){
vl <- createpop(1000, prev[i], 1000, prevfail=TRUE)
time <- rep(t[i], times=1000)
data1 <- cbind(vl, time)
data <- rbind(data, data1)
}
data <- data.frame(data)
data$logtime <- log(data$time, base=2)
data$logvl <- log(data$vl, base=10)
check <- data[1:1000,]
high <- check$vl
length(high[high>1000])
plot(data$logvl~data$time)
fit <- glm(data$logvl~data$logtime)
summary(fit)
logtime <- seq(0, 7, by=.1)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.21 + .337*logtime[i]
}
time <- 2^logtime
plot(logvl~time)
data <- data.frame(data)
data$logtime <- log(data$time, base=1.5)
data$logvl <- log(data$vl, base=10)
check <- data[1:1000,]
high <- check$vl
length(high[high>1000])
plot(data$logvl~data$time)
fit <- glm(data$logvl~data$logtime)
summary(fit)
logtime <- seq(0, 7, by=.1)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.21 + .197*logtime[i]
}
time <- 1.5^logtime
plot(logvl~time)
data <- data.frame(data)
data$logtime <- log(data$time)
data$logvl <- log(data$vl, base=10)
check <- data[1:1000,]
high <- check$vl
length(high[high>1000])
plot(data$logvl~data$time)
fit <- glm(data$logvl~data$logtime)
summary(fit)
logtime <- seq(0, 7, by=.1)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.21 + .4863*logtime[i]
}
time <- exp(logtime)
plot(logvl~time)
plot(logvl~time, xlim=(0, 100))
logtime <- seq(0, 4.3, by=.1)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.21 + .4863*logtime[i]
}
time <- exp(logtime)
plot(logvl~time)
fit <- glm(data$logvl~data$logtime)
summary(fit)
logtime <- seq(0, 4.3, by=.1)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.21 + .4863*logtime[i]
}
time <- exp(logtime)
plot(logvl~time)
plot(logvl~time, main="Log10(VL) vs. Log(Time in Months from Suppression",
xlab="Time in Months", ylab="Log10(VL")
plot(logvl~time, main="Log10(VL) vs. Log2(Time in Months from Suppression)
Combined Population",
xlab="Time in Months", ylab="Log10(VL")
data$logtime <- log(data$time, base=2)
data$logvl <- log(data$vl, base=10)
check <- data[1:1000,]
high <- check$vl
length(high[high>1000])
plot(data$logvl~data$time)
fit <- glm(data$logvl~data$logtime)
summary(fit)
plot(logvl~time, main="Log10(VL) vs. Log2(Time in Months from Suppression)
Combined Population",
xlab="Time in Months", ylab="Log10(VL)")
prev.est.naive <- c(.01,.02,.05,.07,.08,.11,.11,.14,.17,.19,.20, .22)
data.naive <- matrix(nrow=0, ncol=2)
for(i in 1:length(prev.est.naive)){
vl <- createpop(1000, prev.est.naive[i], 1000, prevfail=TRUE)
time <- rep(t[i], times=1000)
data1 <- cbind(vl, time)
data.naive <- rbind(data.naive, data1)
}
data.naive <- data.frame(data.naive)
data.naive$logtime <- log(data.naive$time, base=2)
data.naive$logvl <- log(data.naive$vl, base=10)
check <- data.naive[1:1000,]
high <- check
length(high[high>1000])
fit.naive <- glm(data.naive$logvl~data.naive$logtime)
summary(fit.naive)
fit <- glm(data$logvl~data$logtime)
summary(fit)
logtime <- seq(0, 4.3, by=.1)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.2063 + .3370*logtime[i]
}
time <- 2^logtime
plot(logvl~time, main="Log10(VL) vs. Log2(Time in Months from Suppression)
Combined Population",
xlab="Time in Months", ylab="Log10(VL)")
2^4.3
log(100, base=2)
logtime <- seq(0, 7, by=.1)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.2063 + .3370*logtime[i]
}
time <- 2^logtime
plot(logvl~time, main="Log10(VL) vs. Log2(Time in Months from Suppression)
Combined Population",
xlab="Time in Months", ylab="Log10(VL)")
10^3.5
data$sqrtime <- data$time^(1/2)
fit2 <- glm(data$logvl~data$sqrtime)
summary(fit2)
sqrtime <- seq(0, 10, by=.1)
logvl <- NULL
for(i in 1:length(sqrtime)){
logvl[i] <- 0.9343 + .4370*sqrtime[i]
}
time <- sqrtime^2
plot(logvl~time, main="Log10(VL) vs. Square Root Time in Months from Suppression)
Combined Population",
xlab="Time in Months", ylab="Log10(VL)")
plot(logvl~time, main="Log10(VL) vs. Log2(Time in Months from Suppression)
Combined Population",
xlab="Time in Months", ylab="Log10(VL)")
time <- 2^logtime
plot(logvl~time, main="Log10(VL) vs. Log2(Time in Months from Suppression)
Combined Population",
xlab="Time in Months", ylab="Log10(VL)")
logtime <- seq(0, 7, by=.1)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.2063 + .3370*logtime[i]
}
time <- 2^logtime
plot(logvl~time, main="Log10(VL) vs. Log2(Time in Months from Suppression)
Combined Population",
xlab="Time in Months", ylab="Log10(VL)")
data.naive <- data.frame(data.naive)
data.naive$logtime <- log(data.naive$time, base=2)
data.anive$sqrtime <- data.naive$time^(1/2)
data.naive$logvl <- log(data.naive$vl, base=10)
check <- data.naive[1:1000,]
high <- check
length(high[high>1000])
fit.naive <- glm(data.naive$logvl~data.naive$sqrtime)
summary(fit.naive)
logtime <- seq(0, 4.3, by=.1)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.3241 + .1654*sqrtime[i]
}
time <- sqrtime^2
plot(logvl~time, main="Log10(VL) vs. Sqrt(Time in Months)
Naive Population",
xlab="Time in Months", ylab="Log10(VL)")
sqrtime <- seq(0, 10, by=.1)
logvl <- NULL
for(i in 1:length(logtime)){
logvl[i] <- 1.3241 + .1654*sqrtime[i]
}
time <- sqrtime^2
plot(logvl~time, main="Log10(VL) vs. Sqrt(Time in Months)
Naive Population",
xlab="Time in Months", ylab="Log10(VL)")
sqrtime <- seq(0, 10, by=.1)
logvl <- NULL
for(i in 1:length(sqrtime)){
logvl[i] <- 1.3241 + .1654*sqrtime[i]
}
time <- sqrtime^2
plot(logvl~time, main="Log10(VL) vs. Sqrt(Time in Months)
Naive Population",
xlab="Time in Months", ylab="Log10(VL)")
10^0.5
prev.est.exp <- c(.01,.03,.08,.15,.20,.26,.30,.34,.36,.39,.40,.42)
prev.est.exp <- c(.01,.03,.08,.15,.20,.26,.30,.34,.36,.39,.40,.42)
?glm()
install.packages("knitr")
install.packages("rmarkdown")
install.packages("rmarkdown")
library("rmarkdown", lib.loc="~/R/win-library/3.1")
library("knitr", lib.loc="~/R/win-library/3.1")
updateR()
updateR()
if(!require(installr)) {
install.packages("installr");
require(installr)
} #load / install+load installr
updateR()
setwd("C:/Users/Barny/Dropbox/KI_Project_4/Programs")
source("method_eval1_run2.R")
source("method_eval2_run2.R")
source("method_eval3_run2.R")
source("method_eval4_run2.R")
check <- read.table("Results_reverse_ME.5_rand.R")
setwd("C:/Users/Barny/Dropbox/KI_Project_4/Results/temp")
check <- read.table("Results_reverse_ME.5_rand.R")
View(check)
library(tidyverse)
library(dplyr)
setwd("C:/Users/Barny/Dropbox/KI_Project_4/Programs")
source("method_eval_source_new.R")
setwd("C:/Users/Barny/Dropbox/KI_Project_4/Data/SimData")
debug(pool.alg.cov)
set.seed(18)
result1 <- pool.alg.cov(reps=77, data=data, matsize=10, prec=10, precrd=20,
cutoff=1000, SE=.5, tstperd=5, lowlimit=50, filltyp="rnd")
write.table(result1, file="C:/Users/Barny/Dropbox/KI_Project_4/Results/2nd round/SD1.0_set_betas/Results_reverse_ME.5_rand.R")
set.seed(18)
result1 <- pool.alg.cov(reps=77, data=data, matsize=10, prec=10, precrd=20,
cutoff=1000, SE=.5, tstperd=5, lowlimit=50, filltyp="rnd")
write.table(result1, file="C:/Users/Barny/Dropbox/KI_Project_4/Results/2nd round/SD1.0_set_betas/Results_reverse_ME.5_rand.R")
undebug(logit)
undebug(pool.alg.cov)
set.seed(18)
result1 <- pool.alg.cov(reps=77, data=data, matsize=10, prec=10, precrd=20,
cutoff=1000, SE=.5, tstperd=5, lowlimit=50, filltyp="rnd")
write.table(result1, file="C:/Users/Barny/Dropbox/KI_Project_4/Results/2nd round/SD1.0_set_betas/Results_reverse_ME.5_rand.R")
library(tidyverse)
library(dplyr)
setwd("C:/Users/Barny/Dropbox/KI_Project_4/Programs")
source("method_eval_source_new.R")
setwd("C:/Users/Barny/Dropbox/KI_Project_4/Data/SimData")
data <- read.table("Uganda_SimData_SD1.0.R")
data <- predictVL(data, b0star=6, b1star=-0.1, b2star=-2, b3star=-0.1)
set.seed(18)
result1 <- pool.alg.cov(reps=500, data=data, matsize=10, prec=10, precrd=20,
cutoff=1000, SE=.5, tstperd=5, lowlimit=50, filltyp="rnd")
write.table(result1, file="C:/Users/Barny/Dropbox/KI_Project_4/Results/2nd round/SD1.0_set_betas/Results_reverse_ME.5_rand.R")
setwd("C:/Users/Barny/Dropbox/KI_Project_4/Results/2nd round/SD1.0_set_betas")
check <- read.table("Results_reverse_ME.5_rand.R")
View(check)
summary(check)
